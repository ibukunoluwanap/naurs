{% extends 'dashboard/dashboard.html' %} 
{% load static %} 
{% load humanize %}
{% load widget_tweaks %} 
{% block title %}<title>Naurs - Dashboard Programs</title>{% endblock title %} 

{% block dashboard %}
<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 mt-3 mb-5">
  <div class="row mb-3">
    <div class="col-sm-12">
      <a href="#" class="btn btn-lg float-end">
        <span data-feather="plus"></span>
        Create Program
      </a>
    </div>
  </div>

  <!-- title -->
  <div class="row">
    <div class="col-12">
      <h4>All Programs</h4>
    </div>
  </div>

  <!-- programs -->
  <div class="row">
    <div class="col-sm-12">
      <div class="table-responsive shadow rounded">
        <table class="table table-hover table-sm align-middle border-bottom m-0">
          <thead class="table-cus-dark">
            <tr>
              <th scope="col" class="p-3"></th>
              <th scope="col" class="p-3">Title</th>
              <th scope="col" class="p-3">Category</th>
              <th scope="col" class="p-3">Price</th>
              <th scope="col" class="p-3">Content</th>
              <th scope="col" class="p-3">Created On</th>
              <th scope="col" class="p-3">Visibility</th>
              <th scope="col" class="p-3">Delete</th>
            </tr>
          </thead>
          <tbody>
            {% if without_filter_programs %} {% for program in without_filter_programs %}
            <tr>
              <th scope="row" class="p-2">
                {% if program.image %}
                  <img
                      class="avatar"
                      src="{{program.image.url}}"
                      width="100%"
                      height="100%"
                      alt="avatar"
                  />
                {% else %}
                  <div class="avatar">
                    <i class="bi bi-building align-middle"></i>
                  </div>
                {% endif %}
              </th>
              <td class="p-2">
                <a
                  href="{% url 'dashboard_program_detail_page' pk=program.id %}"
                  class="text-decoration-none text-cus-primary"
                  >{{program.title|safe|truncatechars:50}}</a
                >
              </td>
              <td class="p-2">{{program.category}}</td>
              <td class="p-2">{{program.price}} AED</td>
              <td class="p-2">{{program.content|safe|truncatechars:20}}</td>
              <td class="p-2">{{program.created_on|naturaltime}}</td>
              <td class="p-2">
                {% if program.is_active %}
                <a
                  href="#"
                  class="btn btn-sm btn-secondary d-flex justify-self-center justify-content-center text-center"
                  >Deactivate</a
                >
                {% else %}
                <a
                  href="#"
                  class="btn btn-sm btn-success d-flex justify-self-center justify-content-center text-center"
                  >Activate</a
                >
                {% endif %}
              </td>
              <td class="p-2">
                <a
                  href="#"
                  class="btn btn-sm btn-danger d-flex justify-self-center justify-content-center text-center"
                  >Delete</a
                >
              </td>
            </tr>
            {% endfor %} {% else %}
            <tr>
              <td class="p-2">
                <i class="display-1 bi bi-trash align-middle"></i>
              </td>
              <td class="p-2">
                <p>No program currently available!</p>
              </td>
            </tr>
            {% endif %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</main>
{% endblock dashboard %}
